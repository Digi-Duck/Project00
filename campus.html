<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="./css/campus.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/loading-style.css">
    <title>中興大學地圖導覽</title>
</head>

<body>
    <!-- loading -->
    <div id="loader">
        <div class="scene">
            <div class="cube-wrapper">
                <div class="cube">
                    <div class="cube-faces">
                        <div class="cube-face shadow"></div>
                        <div class="cube-face bottom"></div>
                        <div class="cube-face top"></div>
                        <div class="cube-face left"></div>
                        <div class="cube-face right"></div>
                        <div class="cube-face back"></div>
                        <div class="cube-face front"></div>
                    </div>
                </div>
            </div>
            <span class="loader"></span>
        </div>
    </div>
    <!-- 本頁內容 -->
    <div class="container">
        <nav class="nav">
            <!-- 導覽列按鈕 -->
            <div class="itemBox">
                <!-- home鍵 -->
                <a href="index.html" class="icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none">
                        <path
                            d="M25.666 3.66667H18.3327V7.33334H14.666V11H10.9993V14.6667H7.33268V18.3333H3.66602V22H7.33268V40.3333H20.166V29.3333H23.8327V40.3333H36.666V22H40.3327V18.3333H36.666V14.6667H32.9993V11H29.3327V7.33334H25.666V3.66667ZM25.666 7.33334V11H29.3327V14.6667H32.9993V18.3333H36.666V22H32.9993V36.6667H27.4993V25.6667H16.4993V36.6667H10.9993V22H7.33268V18.3333H10.9993V14.6667H14.666V11H18.3327V7.33334H25.666Z"
                            fill="#C0AE67" />
                    </svg>
                </a>
                <!-- about us 按鈕 -->
                <a href="#" class="about-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="44" height="44" viewBox="0 0 44 44" fill="none">
                        <path
                            d="M27.5004 9.89999C27.5004 11.3587 26.9209 12.7576 25.8895 13.7891C24.858 14.8205 23.4591 15.4 22.0004 15.4C20.5417 15.4 19.1428 14.8205 18.1113 13.7891C17.0799 12.7576 16.5004 11.3587 16.5004 9.89999C16.5004 8.4413 17.0799 7.04236 18.1113 6.01091C19.1428 4.97946 20.5417 4.39999 22.0004 4.39999C23.4591 4.39999 24.858 4.97946 25.8895 6.01091C26.9209 7.04236 27.5004 8.4413 27.5004 9.89999ZM38.5004 11C38.5004 12.1669 38.0368 13.2861 37.2117 14.1113C36.3865 14.9364 35.2673 15.4 34.1004 15.4C32.9334 15.4 31.8143 14.9364 30.9891 14.1113C30.164 13.2861 29.7004 12.1669 29.7004 11C29.7004 9.83304 30.164 8.71388 30.9891 7.88872C31.8143 7.06356 32.9334 6.59999 34.1004 6.59999C35.2673 6.59999 36.3865 7.06356 37.2117 7.88872C38.0368 8.71388 38.5004 9.83304 38.5004 11ZM9.90039 15.4C11.0673 15.4 12.1865 14.9364 13.0117 14.1113C13.8368 13.2861 14.3004 12.1669 14.3004 11C14.3004 9.83304 13.8368 8.71388 13.0117 7.88872C12.1865 7.06356 11.0673 6.59999 9.90039 6.59999C8.73344 6.59999 7.61428 7.06356 6.78912 7.88872C5.96396 8.71388 5.50039 9.83304 5.50039 11C5.50039 12.1669 5.96396 13.2861 6.78912 14.1113C7.61428 14.9364 8.73344 15.4 9.90039 15.4ZM13.2004 20.35C13.2004 18.832 14.4324 17.6 15.9504 17.6H28.0504C29.5684 17.6 30.8004 18.832 30.8004 20.35V30.8C30.8004 33.1339 29.8733 35.3722 28.2229 37.0225C26.5726 38.6729 24.3343 39.6 22.0004 39.6C19.6665 39.6 17.4282 38.6729 15.7779 37.0225C14.1275 35.3722 13.2004 33.1339 13.2004 30.8V20.35ZM11.0004 20.35C11.0004 19.3314 11.3084 18.3876 11.8342 17.6H7.15039C5.63239 17.6 4.40039 18.832 4.40039 20.35V28.6C4.40029 29.5419 4.60178 30.4728 4.99131 31.3304C5.38085 32.1879 5.94942 32.9521 6.65881 33.5717C7.3682 34.1913 8.20199 34.6518 9.10414 34.9224C10.0063 35.193 10.9559 35.2674 11.8892 35.1406C11.3006 33.7693 10.9981 32.2923 11.0004 30.8V20.35ZM33.0004 30.8C33.0004 32.34 32.6836 33.8096 32.1116 35.1406C33.0449 35.2674 33.9945 35.193 34.8966 34.9224C35.7988 34.6518 36.6326 34.1913 37.342 33.5717C38.0514 32.9521 38.6199 32.1879 39.0095 31.3304C39.399 30.4728 39.6005 29.5419 39.6004 28.6V20.35C39.6004 18.832 38.3684 17.6 36.8504 17.6H32.1666C32.6946 18.3876 33.0004 19.3314 33.0004 20.35V30.8Z"
                            fill="#C0AE67" />
                    </svg>
                </a>
            </div>
        </nav>

        <main>
            <!-- 興大校區模型 -->
            <div id="bg"></div>
            <!-- 生成小卡 -->
            <div class="card"></div>
            <!-- 右邊切換學院科系和公共資源的欄位 -->
            <div class="btn-list">
                <div class="switch">
                    <a href="#" class="switch-btn btn-1 active">學院科系</a>
                    <a href="#" class="switch-btn btn-2">公共資源</a>
                </div>
                <!-- 下方各系所選項按鈕 -->
                <ul class="list-option"></ul>
            </div>
        </main>
    </div>
    <!-- 關於我們彈跳視窗 -->
    <div class="about-us"></div>

    <script async src="https://unpkg.com/es-module-shims@1.8.0/dist/es-module-shims.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script type="importmap">
        {
            "imports": {
                "three": "https://unpkg.com/three@latest/build/three.module.js",
                "three/addons/": "https://unpkg.com/three@latest/examples/jsm/"
            }
        }
        </script>
    <script type="module">
        import { CSS2DRenderer, CSS2DObject } from 'three/addons/renderers/CSS2DRenderer.js';
        import { GLTFLoader } from 'three/addons/loaders/GLTFLoader.js';
        import { OrbitControls } from 'three/addons/controls/OrbitControls.js';
        // import { GUI } from "three/addons/libs/lil-gui.module.min.js";
        import * as THREE from 'three';
        import { academy } from "./js/main.js";
        import { groupMember } from "./js/member.js";


        const switchBtn = document.querySelectorAll('.switch-btn');
        // 學院科系按鈕
        const btn1 = document.querySelector('.btn-1');
        // 公共資源按鈕
        const btn2 = document.querySelector('.btn-2');
        // 學院科系跟公共資源的選項按鈕
        const list = document.querySelector('.list-option');
        // 生成小卡的區塊
        const card = document.querySelector('.card');

        // 關於我們陣列資料
        // const groupMember = [
        //     {
        //         name: '黃絜琳',
        //         position: '組長/程式',
        //     },
        //     {
        //         name: '蔡明哲',
        //         position: '程式',
        //     },
        //     {
        //         name: '陳映達',
        //         position: '企劃',
        //     },
        //     {
        //         name: '吳睿燊',
        //         position: '設計',
        //     },
        //     {
        //         name: '賴菱俐',
        //         position: '設計',
        //     },
        // ]
        // 關於我們彈跳視窗區塊
        const aboutUs = document.querySelector('.about-us');
        const aboutBtn = document.querySelector('.about-icon');

        aboutBtn.addEventListener('click', () => {
            console.log(aboutBtn);
            aboutUs.classList.add('active');
            aboutUs.innerHTML += `
            <div class="about-us-bg">
                    <div class="about-us-content">
                        <div class="about-us-content-nav">
                            <svg xmlns="http://www.w3.org/2000/svg" width="95" height="95" viewBox="0 0 95 95" fill="none">
                                <path
                                    d="M31.6667 75.2083C28.5172 75.2083 25.4968 73.9572 23.2698 71.7302C21.0428 69.5032 19.7917 66.4828 19.7917 63.3333V31.6667C19.7917 28.5172 21.0428 25.4968 23.2698 23.2698C25.4968 21.0428 28.5172 19.7917 31.6667 19.7917C32.7165 19.7917 33.7233 19.3746 34.4656 18.6323C35.208 17.89 35.625 16.8831 35.625 15.8333C35.625 14.7835 35.208 13.7767 34.4656 13.0344C33.7233 12.292 32.7165 11.875 31.6667 11.875C26.4176 11.875 21.3835 13.9602 17.6718 17.6718C13.9602 21.3835 11.875 26.4176 11.875 31.6667V63.3333C11.875 68.5824 13.9602 73.6165 17.6718 77.3282C21.3835 81.0398 26.4176 83.125 31.6667 83.125C32.7165 83.125 33.7233 82.708 34.4656 81.9656C35.208 81.2233 35.625 80.2165 35.625 79.1667C35.625 78.1169 35.208 77.11 34.4656 76.3677C33.7233 75.6254 32.7165 75.2083 31.6667 75.2083ZM62.1854 62.1854C62.5564 61.8174 62.8509 61.3796 63.0519 60.8973C63.2528 60.4149 63.3563 59.8975 63.3563 59.375C63.3563 58.8525 63.2528 58.3351 63.0519 57.8527C62.8509 57.3704 62.5564 56.9326 62.1854 56.5646L53.0812 47.5L62.1854 38.4354C62.9308 37.69 63.3495 36.6791 63.3495 35.625C63.3495 34.5709 62.9308 33.56 62.1854 32.8146C61.44 32.0692 60.4291 31.6505 59.375 31.6505C58.3209 31.6505 57.31 32.0692 56.5646 32.8146L47.5 41.9188L38.4354 32.8146C37.69 32.0692 36.6791 31.6505 35.625 31.6505C34.5709 31.6505 33.56 32.0692 32.8146 32.8146C32.0692 33.56 31.6505 34.5709 31.6505 35.625C31.6505 36.6791 32.0692 37.69 32.8146 38.4354L41.9188 47.5L32.8146 56.5646C32.4436 56.9326 32.1491 57.3704 31.9481 57.8527C31.7472 58.3351 31.6437 58.8525 31.6437 59.375C31.6437 59.8975 31.7472 60.4149 31.9481 60.8973C32.1491 61.3796 32.4436 61.8174 32.8146 62.1854C33.1826 62.5564 33.6204 62.8509 34.1027 63.0519C34.5851 63.2528 35.1025 63.3563 35.625 63.3563C36.1475 63.3563 36.6649 63.2528 37.1473 63.0519C37.6296 62.8509 38.0674 62.5564 38.4354 62.1854L47.5 53.0812L56.5646 62.1854C56.9326 62.5564 57.3704 62.8509 57.8527 63.0519C58.3351 63.2528 58.8525 63.3563 59.375 63.3563C59.8975 63.3563 60.4149 63.2528 60.8973 63.0519C61.3796 62.8509 61.8174 62.5564 62.1854 62.1854ZM63.3333 11.875C62.2835 11.875 61.2767 12.292 60.5344 13.0344C59.792 13.7767 59.375 14.7835 59.375 15.8333C59.375 16.8831 59.792 17.89 60.5344 18.6323C61.2767 19.3746 62.2835 19.7917 63.3333 19.7917C66.4828 19.7917 69.5032 21.0428 71.7302 23.2698C73.9572 25.4968 75.2083 28.5172 75.2083 31.6667V63.3333C75.2083 66.4828 73.9572 69.5032 71.7302 71.7302C69.5032 73.9572 66.4828 75.2083 63.3333 75.2083C62.2835 75.2083 61.2767 75.6254 60.5344 76.3677C59.792 77.11 59.375 78.1169 59.375 79.1667C59.375 80.2165 59.792 81.2233 60.5344 81.9656C61.2767 82.708 62.2835 83.125 63.3333 83.125C68.5824 83.125 73.6165 81.0398 77.3282 77.3282C81.0398 73.6165 83.125 68.5824 83.125 63.3333V31.6667C83.125 26.4176 81.0398 21.3835 77.3282 17.6718C73.6165 13.9602 68.5824 11.875 63.3333 11.875Z"
                                    fill="#C0AE67" />
                            </svg>
                        </div>
                        <div class="about-us-content-group"></div>
                    </div>
                </div>
            `

            const group = document.querySelector('.about-us-content-group');
            const aboutUsClose = document.querySelector('.about-us-content-nav svg');

            groupMember.forEach((member) => {
                group.innerHTML += `
                <div class="group">
                    <div class="group-img"><img src="${member.image}" alt=""></div>
                    <div class="group-position">${member.position}</div>
                    <div class="group-member">${member.name}</div>
                </div>
                `;
            });

            aboutUsClose.addEventListener('click', () => {
                aboutUs.classList.remove('active');
                aboutUs.innerHTML = "";
            });
        });

        // 學院科系迴圈生成選項按鈕

        for (var i = 0; i < 11; i++) {
            var currentData = academy[i];
            // console.log(currentData);
            list.innerHTML += `
            <a href="#"><li class="option option-1 active">${currentData.name}</li></a>
            `
        }

        // 公共資源迴圈生成選項按鈕
        for (var i = 11; i < academy.length; i++) {
            var currentData = academy[i];
            // console.log(currentData);
            list.innerHTML += `
            <a href="#"><li class="option option-2">${currentData.name}</li></a>
            `
        }

        // 學院科系與公共資源按鈕按下時，切換css移除或新增active
        switchBtn.forEach((e, index) => {
            e.addEventListener('click', (btn) => {
                // 按鈕按下時，移除所有active的css
                switchBtn.forEach(r => {
                    r.classList.remove('active');
                });
                // 如果值為0學院科系按鈕新增active的css
                // 又如果值為1公共資源按鈕新增active的css
                if (index === 0) {
                    e.classList.add('active');
                } else if (index === 1) {
                    e.classList.add('active');
                }

            });
        });

        // 宣告所有被生成出來的選項按鈕
        const options = document.querySelectorAll('.option');
        // 宣告'學院科系'選項按鈕
        const academyOption = document.querySelectorAll('.option-1');
        // 宣告'公共資源'選項按鈕
        const resourceOption = document.querySelectorAll('.option-2');

        // 當'學院科系'按鈕被按下時，移除'公共資源'所有選項的active
        // 並且新增所有'學院科系'選項的active
        btn1.addEventListener('click', () => {
            resourceOption.forEach((r) => {
                r.classList.remove('active');
            })
            academyOption.forEach((a) => {
                a.classList.add('active');
            })
        });

        // 當'公共資源'按鈕被按下時，移除'學院科系'所有選項的active
        // 並且新增所有'公共資源'選項的active
        btn2.addEventListener('click', () => {
            academyOption.forEach((a) => {
                a.classList.remove('active');
            })
            resourceOption.forEach((r) => {
                r.classList.add('active');
            })
        });


        // 所有選項按鈕進入迴圈生成小卡資訊
        options.forEach((option, index) => {
            // 當任何一個選項按鈕被按下，清除所有卡面資料，生成新的卡面資料
            option.addEventListener('click', () => {

                options.forEach((e) => {
                    e.classList.remove('light');
                })

                options[index].classList.add('light');

                card.innerHTML = '';

                // 因為資料順序不會改變，所以可以宣告陣列的index去判斷
                // 且因為是另外聲明出來的資料在option的點擊事件裡都能使用info的變數
                const info = academy[index];
                card.innerHTML += `
                <div class="card-nav">
                    <a href="#" class="close">
                        <svg xmlns="http://www.w3.org/2000/svg" width="53" height="53" viewBox="0 0 53 53" fill="none">
                            <path
                                d="M17.6667 41.9583C15.9096 41.9583 14.2245 41.2603 12.9821 40.0179C11.7397 38.7755 11.0417 37.0904 11.0417 35.3333V17.6667C11.0417 15.9096 11.7397 14.2245 12.9821 12.9821C14.2245 11.7397 15.9096 11.0417 17.6667 11.0417C18.2524 11.0417 18.8141 10.809 19.2282 10.3949C19.6423 9.98072 19.875 9.41902 19.875 8.83333C19.875 8.24765 19.6423 7.68595 19.2282 7.27181C18.8141 6.85766 18.2524 6.625 17.6667 6.625C14.7382 6.625 11.9297 7.78832 9.85903 9.85903C7.78832 11.9297 6.625 14.7382 6.625 17.6667V35.3333C6.625 38.2618 7.78832 41.0703 9.85903 43.141C11.9297 45.2117 14.7382 46.375 17.6667 46.375C18.2524 46.375 18.8141 46.1423 19.2282 45.7282C19.6423 45.3141 19.875 44.7523 19.875 44.1667C19.875 43.581 19.6423 43.0193 19.2282 42.6051C18.8141 42.191 18.2524 41.9583 17.6667 41.9583ZM34.6929 34.6929C34.8999 34.4876 35.0642 34.2434 35.1763 33.9743C35.2884 33.7052 35.3461 33.4165 35.3461 33.125C35.3461 32.8335 35.2884 32.5448 35.1763 32.2757C35.0642 32.0066 34.8999 31.7624 34.6929 31.5571L29.6137 26.5L34.6929 21.4429C35.1088 21.0271 35.3424 20.4631 35.3424 19.875C35.3424 19.2869 35.1088 18.7229 34.6929 18.3071C34.2771 17.8912 33.7131 17.6576 33.125 17.6576C32.5369 17.6576 31.9729 17.8912 31.5571 18.3071L26.5 23.3862L21.4429 18.3071C21.0271 17.8912 20.4631 17.6576 19.875 17.6576C19.2869 17.6576 18.7229 17.8912 18.3071 18.3071C17.8912 18.7229 17.6576 19.2869 17.6576 19.875C17.6576 20.4631 17.8912 21.0271 18.3071 21.4429L23.3862 26.5L18.3071 31.5571C18.1001 31.7624 17.9358 32.0066 17.8237 32.2757C17.7116 32.5448 17.6539 32.8335 17.6539 33.125C17.6539 33.4165 17.7116 33.7052 17.8237 33.9743C17.9358 34.2434 18.1001 34.4876 18.3071 34.6929C18.5124 34.8999 18.7566 35.0642 19.0257 35.1763C19.2948 35.2884 19.5835 35.3461 19.875 35.3461C20.1665 35.3461 20.4552 35.2884 20.7243 35.1763C20.9934 35.0642 21.2376 34.8999 21.4429 34.6929L26.5 29.6137L31.5571 34.6929C31.7624 34.8999 32.0066 35.0642 32.2757 35.1763C32.5448 35.2884 32.8335 35.3461 33.125 35.3461C33.4165 35.3461 33.7052 35.2884 33.9743 35.1763C34.2434 35.0642 34.4876 34.8999 34.6929 34.6929ZM35.3333 6.625C34.7476 6.625 34.1859 6.85766 33.7718 7.27181C33.3577 7.68595 33.125 8.24765 33.125 8.83333C33.125 9.41902 33.3577 9.98072 33.7718 10.3949C34.1859 10.809 34.7476 11.0417 35.3333 11.0417C37.0904 11.0417 38.7755 11.7397 40.0179 12.9821C41.2603 14.2245 41.9583 15.9096 41.9583 17.6667V35.3333C41.9583 37.0904 41.2603 38.7755 40.0179 40.0179C38.7755 41.2603 37.0904 41.9583 35.3333 41.9583C34.7476 41.9583 34.1859 42.191 33.7718 42.6051C33.3577 43.0193 33.125 43.581 33.125 44.1667C33.125 44.7523 33.3577 45.3141 33.7718 45.7282C34.1859 46.1423 34.7476 46.375 35.3333 46.375C38.2618 46.375 41.0703 45.2117 43.141 43.141C45.2117 41.0703 46.375 38.2618 46.375 35.3333V17.6667C46.375 14.7382 45.2117 11.9297 43.141 9.85903C41.0703 7.78832 38.2618 6.625 35.3333 6.625Z"
                                fill="#C0AE67" />
                        </svg>
                    </a>
                </div>
                <div class="card-content">
                    <div class="card-title">${info.name}</div>
                    <div class="card-txt">${info.info.join('|')}</div>
                    <div class="card-more">
                        <a href="#" id="${info.link}">
                            <span>更多資訊</span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="41" height="51" viewBox="0 0 41 51"
                                fill="none">
                                <path
                                    d="M7.45459 18.5455H33.5455V23.1818H31.6819V25.5H29.8182V27.8182H27.9546V30.1364H26.091V32.4546H24.2273V34.7727H22.3637V37.0909H18.6364V34.7727H16.7728V32.4546H14.9091V30.1364H13.0455V27.8182H11.1819V25.5H9.31823V23.1818H7.45459V18.5455ZM14.9091 23.1818V25.5H16.7728V27.8182H18.6364V30.1364H22.3637V27.8182H24.2273V25.5H26.091V23.1818H14.9091Z"
                                    fill="#C0AE67" />
                            </svg>
                        </a>  
                    </div>
                </div>
                `

                document.getElementById(`link-${index + 1}`).addEventListener('click', function () {
                    console.log(123);
                    localStorage.setItem('data', `${info.name}`);
                    location.href = 'academy.html';
                });

                const closeCard = document.querySelector('.close');

                closeCard.addEventListener('click', () => {
                    card.innerHTML = '';
                    zoomInTimeline(40, 10, 50 );
                    spotLight.position.set(35, 50, 55);
                });
            });
        });


        // 指定ID為idiot的東西定義為idiot
        const idiot = document.getElementById('bg')
        const scene = new THREE.Scene();
        // scene.background = new THREE.Color('skyblue');
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(40, 10, 50);
        const renderer = new THREE.WebGLRenderer({
            alpha: true, // canvas是否包含alpha (透明度) 默认为 false
            antialias: true,
            precision: 'highp',
            antialias: true,
        });
        // const light = new THREE.AmbientLight(0x404040); // soft white light
        // scene.add(light);
        //舊的燈
        const spotLight = new THREE.SpotLight(0x404040, 400000);
        spotLight.position.set(0, 50, 0);
        scene.add(spotLight);
        //新的燈
        const spotLightF1 = new THREE.SpotLight(0x404040, 2000);
        spotLight.position.set(35, 50, 55);
        scene.add(spotLight);
        // 根據一開始設置的畫布大小決定渲染器大小
        renderer.setSize(idiot.clientWidth, idiot.clientHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ACESFilmicToneMapping;
        renderer.outputEncoding = THREE.sRGBEncoding;
        //聚光燈的輔助線
        // const spotLightHelper = new THREE.SpotLightHelper( spotLight );
        // scene.add( spotLightHelper );
        // 把東西丟到idiot這個ID上
        idiot.appendChild(renderer.domElement);

        // GLTF載入器
        const loader = new GLTFLoader()

        let model1;

        loader.load('./model/0.glb', function (object) {
            // ALL是整個模組 root是模組裡各個"模型"的陣列
            model1 = object.scene;
            const root = object.scenes[0].children;
            scene.add(model1);
            console.log(root);

            // const extensionsUsed = object.parser.json.extensionsUsed;
            // const extensions = object.parser.json.extensions;

            // if (extensionsUsed.includes('KHR_lights_punctual')) {
            //     // 扩展已使用，你可以访问 extensions 对象来获取扩展的数据
            //     const lightsPunctualData = extensions.KHR_lights_punctual;
            //     lightsPunctualData.lights[0].intensity = 10;
            //     lightsPunctualData.lights[1].intensity = 10;
            //     lightsPunctualData.lights[2].intensity = 10;
            //     lightsPunctualData.lights[3].intensity = 10;
            //     lightsPunctualData.lights[4].intensity = 10;
            //     console.log('KHR_lights_punctual 数据:', lightsPunctualData.lights[0].intensity);

            // } else {
            //     console.log('未使用 KHR_lights_punctual 扩展');
            // }
        })

        // 宣告zoom-in的效果
        //x,y,z是學院的位址
        //a,b,c是camera.lookAt的位址
        const zoomInTimeline = (x, y, z , a = 0, b = 0, c = 0, zoomOutFactor = 0) => {
            let tl = gsap
                .timeline({ defaults: { duration: 1.5, ease: "expo.out" } })
                .to(controls.target, { x, y, z })
                .to(camera.position, { x, y, z: z + zoomOutFactor,
                    onUpdate: function () {
                        camera.lookAt(a, b, c);
                    } 
                }, 0)

            // .to(group.rotation, { x: 0, y: 0 }, 0);
        };

        console.log(options[0]);

        // 文學院
        options[0].addEventListener("click", () => {
            zoomInTimeline(39, 10, 33, 32, 5, 39);
            spotLight.position.set(39, 40, 33);
            // setTimeout(() => {
            //     camera.lookAt(27, 2, 44);
            // },5000)
        });

        // 農業暨自然資源學院
        options[1].addEventListener("click", () => {
            zoomInTimeline(-4, 10, 23 ,-7 , 5 , 14);
            spotLight.position.set(-4, 40, 23);

        });

        // 理學院
        options[2].addEventListener("click", () => {
            zoomInTimeline(-18, 8, 15 , -23, 4 ,10);
            spotLight.position.set(-18, 40, 15);

        });

        // 工學院
        options[3].addEventListener("click", () => {
            zoomInTimeline(-34, 8, 18 , -41, 2, 10);
            spotLight.position.set(-34, 40, 18);

        });

        // 生命科學院
        options[4].addEventListener("click", () => {
            zoomInTimeline(-0, 8, 32, -7, 4 , 23);
            spotLight.position.set(5, 40, 35);

        });

        // 獸醫學院
        options[5].addEventListener("click", () => {
            zoomInTimeline(-34, 8, -16,-41, 2, -22)
            spotLight.position.set(-34, 40, -22);

        });

        // 管理學院
        options[6].addEventListener("click", () => {
            zoomInTimeline(19, 10, 29, 28, 3, 20);
            spotLight.position.set(23, 40, 27);

        });

        // 法政學院
        options[7].addEventListener("click", () => {
            zoomInTimeline(27, 8, 15, 22, 5, 11);
            spotLight.position.set(29, 40, 18);

        });

        // 電機資訊學院
        options[8].addEventListener("click", () => {
            zoomInTimeline(-9, 8, 44, -9, 2, 30);
            spotLight.position.set(-8, 40, 44);

        });

        // 醫學院
        options[9].addEventListener("click", () => {
            zoomInTimeline(-33, 8, 45, -39, 3, 36);
            spotLight.position.set(-33, 40, 45);

        });

        // 創新產業暨國際學院
        options[10].addEventListener("click", () => {
            zoomInTimeline(19, 10, 29, 28, 3, 20);
            spotLight.position.set(23, 40, 27);

        });

        // 行政
        options[11].addEventListener("click", () => {
            zoomInTimeline(17, 8, 38, 10, 3, 28);
            spotLight.position.set(17, 40, 38);

        });

        // 圖書
        options[12].addEventListener("click", () => {
            zoomInTimeline(18, 8, 10, 10, 2, -0);
            spotLight.position.set(18, 40, 10);

        });

        // 體育
        options[13].addEventListener("click", () => {
            zoomInTimeline(-18, 10, -19, 6, 4, -31);
            spotLight.position.set(20, 40, -2);

        });

        // 餐廳
        options[14].addEventListener("click", () => {
            zoomInTimeline(-17, 10, 55, -22, 4, 46);
            spotLight.position.set(-17, 40, 55);

        });

        function animate() {
            requestAnimationFrame(animate);
            renderer.render(scene, camera);
        }

        // // 添加事件监听器
        // window.addEventListener('click', onDocumentClick);

        // function onDocumentClick(event) {
        //     // 获取鼠标点击位置的屏幕坐标
        //     const mouse = new THREE.Vector2((event.clientX / window.innerWidth) * 2 - 1, -(event.clientY / window.innerHeight) * 2 + 1);

        //     // 从相机位置发射一条射线
        //     const raycaster = new THREE.Raycaster();
        //     raycaster.setFromCamera(mouse, camera);

        //     // 计算射线与模型的相交点
        //     const intersects = raycaster.intersectObject(model1, true);

        //     if (intersects.length > 0) {
        //         // 获取第一个相交点的坐标
        //         const intersectionPoint = intersects[0].point;

        //         // 在这里，你可以根据相交点的坐标来计算建筑物的相对位置
        //         console.log('相对位置:', intersectionPoint);
        //     }
        // }

        // 問老師
        // 新增控制器
        const controls = new OrbitControls(camera, renderer.domElement);

        //限制視角
        controls.minPolarAngle =  0.8; // 最小极角（垂直旋转）
        controls.maxPolarAngle =  1.45
        //限制鏡頭距離
        controls.minDistance = 40;
        controls.maxDistance = 60;
        
        controls.screenSpacePanning =false
        controls.update()
        //鏡頭平移
        window.addEventListener("drag",()=>{
            console.log('drag');

        });
        // controls.enableRotate = false;
        // // 固定模型在45度角
        // controls.target.set(0, 0, 0); // 将控制器的目标点设置在原点
        

        // // 限制控制器只能左右旋转
        // controls.minPolarAngle = Math.PI / 2; // 最小极角（垂直旋转）为45度
        // controls.maxPolarAngle = Math.PI / 2; // 最大极角也为45度

        // // 限制控制器只能左右平移
        // controls.minAzimuthAngle = -Math.PI / 4; // 最小方位角（水平旋转）为-45度
        // controls.maxAzimuthAngle = Math.PI / 4; // 最大方位角为45度

        // controls.minDistance = 0;
        // controls.maxDistance = 40;

        // controls.mouseButtons = {
        //     LEFT: THREE.MOUSE.PAN,
        //     MIDDLE: THREE.MOUSE.DOLLY,
        //     RIGHT: THREE.MOUSE.ROTATE
        // }
        // 到這裡
        
        // const onWindowResize = () => {
        //     camera.aspect = idiot.clientWidth / idiot.clientHeight;
        //     camera.updateProjectionMatrix();
        //     renderer.setSize(idiot.clientWidth, idiot.clientHeight);
        // };

        // window.addEventListener("resize", onWindowResize, false);

        animate();
    </script>

    <script>
        //loading
        const loading = document.onreadystatechange = function () {
            if (document.readyState === "complete") {
                setTimeout(function () {
                    document.querySelector("#loader").style.opacity = "0";
                    setTimeout(function () {
                        document.querySelector("#loader").style.display = "none";
                    }, 2000);
                }, 4200);

            } else { }
        };
        console.log(loading)
    </script>

</body>

</html>